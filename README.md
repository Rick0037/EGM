# 采样梯度算法
一种采样和梯度下降法相结合的算法，  
利用xEGM的自带的操作来优化控制参数，实现最优搜索。  


### 1.初始化并运行

本软件与MLC运行，只在Matlab中使用，  
首先打开主文件夹运行Initialization.m添加必要的路径  

```
Initialization;
```

我们可以用EGM来创建一个默认的示例，  
特殊的问题可以在*Plant/*.路径中添加文件。  

```
egm  = EGM();  
egm = EGM('new_problem');  
```

刚开始可以只跑一轮，或者一次性的多跑几轮
第一轮的示例过程只是采样为了给单纯形算法和梯度下降法进行试样。

```
egm.go; % To run 1 round.  
egm.go(10); % To run 10 rounds.  
```

### 2.得到寻优结果并分析

输出最后一代运行的最佳顶点信息  
输出某一轮的最佳几个顶点的信息  

```
egm.best_vertex;  
egm.best_vertices(num_th_round, num_best_vertices);  

```

查看学习过程曲线
```
egm.learningCurve;  
```

查看具体EGM的优化过程如何实现

```
egm.controlLandscape(5);
% Visualize the studied vertices in the former 5th round 
% with proximity map generated by vertices in all rounds as background.
% Visualize and save the final control landscape with all the studied vertices.    
egm.controlLandscape;
```

保存当前的图片

```
egm.printFigure('Name_of_Figure');  

```

### 3.EGM的参数设置入口

由于是采用单纯形算法进行采样和下降过程，有以下几个形状参数可以设定see *default_parameters.m*.  
```
% Gradient_simplex parameters
simplexMirrorStep = 1;  
simplexContractStep = 0.5;  
simplexExpandStep = 2;  
simplexShrinkStep = 1/2;  
simplexParam = ...  
[simplexMirrorStep simplexContractStep simplexExpandStep simplexShrinkStep];  
parameters.simplexParam = simplexParam;   
parameters.simplexSize = parameters.inputDimen + 1; % The simplex size is related to the problem, see *default_parameters.m*.  
parameters.gradient_Nstep = 1;       
    
% Exploration_sample parameters                           
parameters.sampleSetSize = 1e3;  
parameters.punishCost = 10;  
parameters.exploration_Nstep = 1;    

```

### 4.保存与恢复

到避免被覆盖！！！，最好是保存和加载使用给定名称。  
如果未给定，EGM对象将另存为“EGM”。  
有关更多详细信息，请参阅CheatSheet.m。  
```
egm.save_results;  
egm.load_obj('Name_of_Run');  

```

### 5.目录结构

主要的目标包括以下的文件和文件夹：
- *README.md*  
- *Initialization.m* 初始化运行.m文件。    
- *Restart.m* 重新启动.m文件。    
- *@EGM/*, *@Esample/*, *@Gsimplex/*, *@Mtable/* 算法相关的内部文件。  
- *Tools/* 包含EGM类对象未使用的函数和文件。   
- *Plant/* 包含我们要解决的问题的定义的参数 。  
- *save_runs/* 图片和工作区的保存地点。   

示例文件可见Example.md
如有建议及bug欢迎联系19s053048@stu.hit.edu.cn
